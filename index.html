
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>V-COIN</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
	<script>
	const AFRAME = window.AFRAME;

/*
* Scales the object proportionally to a set value given in meters.
*/

AFRAME.registerComponent('natural-size', {
  schema: {
    width: {
      type: "number",
      default: undefined // meters
    },
    height: {
      type: "number",
      default: undefined // meters
    },
    depth: {
      type: "number",
      default: undefined // meters
    }
  },

  init() {
    this.el.addEventListener('model-loaded', this.rescale.bind(this));
  },

  update() {
    this.rescale();
  },

  rescale() {

    const el = this.el;
    const data = this.data;
    const model = el.object3D;

    const box = new THREE.Box3().setFromObject(model);
    const size = box.getSize();

    if ( !size.x && !size.y && !size.z ) {
      return;
    }

    let scale = 1;

    if ( data.width ) {
      scale = data.width / size.x;
    } else if( data.height ) {
      scale = data.height ( size.y);
    } else if( data.depth ) {
      scale = data.depth / size.y;
    }

    el.setAttribute('scale', `${scale} ${scale} ${scale}`);

  },

  remove() {
    this.el.removeEventListener('model-loaded', this.rescale);
  }

});
	</script>
</head>

<body style='margin: 0; overflow: hidden;'>
    <a-scene
        vr-mode-ui="enabled: false"
		embedded
        arjs='sourceType: webcam; debugUIEnabled: false;'>
<a-entity natural-size='width:5' gltf-model="./magnemite/scene.gltf />
        
        <a-camera gps-camera rotation-reader></a-camera>
	</a-scene>
</body>


